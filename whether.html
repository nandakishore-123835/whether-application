<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Dashboard</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(180deg, #a2bece, #764ba2);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }
      .container {
        max-width: 1200px;
        margin: auto;
      }
      .header {
        text-align: center;
        color: #fff;
        margin-bottom: 30px;
      }
      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .search-box {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 30px;
      }
      .search-box input {
        padding: 12px 20px;
        border: none;
        border-radius: 25px;
        width: 300px;
        font-size: 16px;
        outline: none;
      }
      .search-box button {
        padding: 12px 30px;
        border: none;
        border-radius: 25px;
        background: #4caf50;
        color: #fff;
        font-size: 16px;
        cursor: pointer;
      }

      .current-weather,
      .forecast-section {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .current-main {
        display: flex;
        gap: 30px;
        align-items: center;
        margin-bottom: 30px;
      }
      .weather-icon {
        font-size: 6em;
      }
      .temperature {
        font-size: 4em;
        font-weight: bold;
        color: #667eea;
      }
      .description {
        font-size: 1.5em;
        color: #666;
        text-transform: capitalize;
      }

      .weather-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
      }
      .detail-item {
        background: #f5f5f5;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
      }
      .label {
        color: #666;
        font-size: 0.9em;
      }
      .value {
        font-size: 1.5em;
        font-weight: bold;
      }

      .hourly-forecast {
        display: flex;
        gap: 15px;
        overflow-x: auto;
        padding-bottom: 10px;
      }
      .hourly-item {
        min-width: 100px;
        background: #f5f5f5;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
      }

      .daily-forecast {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 15px;
      }
      .daily-item {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
      }

      .loading {
        text-align: center;
        color: #fff;
        font-size: 1.5em;
        padding: 50px;
      }
      .error {
        background: #f44336;
        color: #fff;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>üå§Ô∏è Weather Dashboard</h1>
        <p>Your real-time weather companion</p>
      </div>

      <div class="search-box">
        <input
          id="cityInput"
          value="hyderabad"
          placeholder="Enter city name..."
        />
        <button onclick="searchAndLoadWeather()">Search</button>
      </div>

      <div id="errorMsg" class="error" style="display: none"></div>
      <div id="loading" class="loading" style="display: none">
        Loading weather data...
      </div>

      <div id="weatherContent" style="display: none">
        <div class="current-weather">
          <div>
            <div class="location" id="location"></div>
            <div class="date" id="date"></div>
          </div>
          <div class="current-main">
            <div id="currentIcon" class="weather-icon">‚òÄÔ∏è</div>
            <div>
              <div id="temperature" class="temperature"></div>
              <div id="description" class="description"></div>
            </div>
          </div>

          <div class="weather-details">
            <div class="detail-item">
              <div class="label">Feels Like</div>
              <div id="feelsLike" class="value"></div>
            </div>
            <div class="detail-item">
              <div class="label">Humidity</div>
              <div id="humidity" class="value"></div>
            </div>
            <div class="detail-item">
              <div class="label">Wind Speed</div>
              <div id="windSpeed" class="value"></div>
            </div>
            <div class="detail-item">
              <div class="label">Pressure</div>
              <div id="pressure" class="value"></div>
            </div>
          </div>
        </div>

        <div class="forecast-section">
          <h2>Hourly Forecast</h2>
          <div id="hourlyForecast" class="hourly-forecast"></div>
        </div>

        <div class="forecast-section">
          <h2>7-Day Forecast</h2>
          <div id="dailyForecast" class="daily-forecast"></div>
        </div>
      </div>
    </div>

    <script>
      const getElement = (id) => document.getElementById(id);
      const WEATHER_ICONS = {
        0: "‚òÄÔ∏è",
        1: "üå§Ô∏è",
        2: "‚õÖ",
        3: "‚òÅÔ∏è",
        45: "üå´Ô∏è",
        48: "üå´Ô∏è",
        51: "üå¶Ô∏è",
        53: "üå¶Ô∏è",
        55: "üåßÔ∏è",
        61: "üåßÔ∏è",
        63: "üåßÔ∏è",
        65: "üåßÔ∏è",
        71: "üå®Ô∏è",
        73: "üå®Ô∏è",
        75: "üå®Ô∏è",
        77: "üå®Ô∏è",
        80: "üå¶Ô∏è",
        81: "üåßÔ∏è",
        82: "üåßÔ∏è",
        85: "üå®Ô∏è",
        86: "üå®Ô∏è",
        95: "‚õàÔ∏è",
        96: "‚õàÔ∏è",
        99: "‚õàÔ∏è",
      };

      const WEATHER_DESCRIPTION = {
        0: "Clear sky",
        1: "Mainly clear",
        2: "Partly cloudy",
        3: "Overcast",
        45: "Foggy",
        48: "Foggy",
        51: "Light drizzle",
        53: "Moderate drizzle",
        55: "Heavy drizzle",
        61: "Light rain",
        63: "Moderate rain",
        65: "Heavy rain",
        71: "Light snow",
        73: "Moderate snow",
        75: "Heavy snow",
        80: "Rain showers",
        95: "Thunderstorm",
      };

      const getWeatherIcon = (code) => WEATHER_ICONS[code] || "üå§Ô∏è";
      const getWeatherText = (code) => WEATHER_DESCRIPTION[code] || "Unknown";

      async function fetchCityCoordinates(cityName) {
        let response = await fetch(
          `https://geocoding-api.open-meteo.com/v1/search?name=${cityName}&count=1`
        );
        let data = await response.json();
        if (!data.results) throw "City not found";
        return data.results[0];
      }

      async function fetchWeatherData(latitude, longitude) {
        let response = await fetch(
          `https://api.open-meteo.com/v1/forecast?
latitude=${latitude}&longitude=${longitude}
&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m,pressure_msl
&hourly=temperature_2m,weather_code
&daily=weather_code,temperature_2m_max,temperature_2m_min
&timezone=auto`
        );
        return response.json();
      }

      function displayCurrentWeather(location, weatherData) {
        let current = weatherData.current;
        getElement(
          "location"
        ).textContent = `${location.name}, ${location.country}`;
        getElement("date").textContent = new Date().toDateString();
        getElement("currentIcon").textContent = getWeatherIcon(
          current.weather_code
        );
        getElement("temperature").textContent =
          Math.round(current.temperature_2m) + "¬∞C";
        getElement("description").textContent = getWeatherText(
          current.weather_code
        );
        getElement("feelsLike").textContent =
          Math.round(current.apparent_temperature) + "¬∞C";
        getElement("humidity").textContent = current.relative_humidity_2m + "%";
        getElement("windSpeed").textContent =
          Math.round(current.wind_speed_10m) + " km/h";
        getElement("pressure").textContent =
          Math.round(current.pressure_msl) + " hPa";
      }

      function displayHourlyForecast(weatherData) {
        getElement("hourlyForecast").innerHTML = "";

        for (let i = 0; i < 24; i++) {
          getElement("hourlyForecast").innerHTML += `
    <div class="hourly-item">
      <div>${new Date(weatherData.hourly.time[i]).getHours()}:00</div>
      <div>${getWeatherIcon(weatherData.hourly.weather_code[i])}</div>
      <div>${Math.round(weatherData.hourly.temperature_2m[i])}¬∞C</div>
    </div>`;
        }
      }

      function displayDailyForecast(weatherData) {
        getElement("dailyForecast").innerHTML = "";

        for (let i = 0; i < 7; i++) {
          getElement("dailyForecast").innerHTML += `
    <div class="daily-item">
      <div>${
        i === 0
          ? "Today"
          : new Date(weatherData.daily.time[i]).toLocaleDateString("en", {
              weekday: "short",
            })
      }</div>
      <div>${getWeatherIcon(weatherData.daily.weather_code[i])}</div>
      <div>
        <span style="color:red">${Math.round(
          weatherData.daily.temperature_2m_max[i]
        )}¬∞</span>
        <span style="color:blue">${Math.round(
          weatherData.daily.temperature_2m_min[i]
        )}¬∞</span>
      </div>
    </div>`;
        }
      }

      async function searchAndLoadWeather() {
        try {
          getElement("loading").style.display = "block";
          getElement("weatherContent").style.display = "none";
          getElement("errorMsg").style.display = "none";

          let cityName = getElement("cityInput").value.trim();
          let location = await fetchCityCoordinates(cityName);
          let weatherData = await fetchWeatherData(
            location.latitude,
            location.longitude
          );

          displayCurrentWeather(location, weatherData);
          displayHourlyForecast(weatherData);
          displayDailyForecast(weatherData);

          getElement("loading").style.display = "none";
          getElement("weatherContent").style.display = "block";
        } catch (error) {
          getElement("loading").style.display = "none";
          getElement("errorMsg").textContent = error;
          getElement("errorMsg").style.display = "block";
        }
      }

      getElement("cityInput").addEventListener(
        "keypress",
        (e) => e.key === "Enter" && searchAndLoadWeather()
      );

      searchAndLoadWeather();
    </script>
  </body>
</html>
